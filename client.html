<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحة العميل</title>
    <link rel="stylesheet" href="styles.css">
    <!-- إضافة مكتبة Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
</head>
<body>
    <h2>مرحبا بك في صفحة العميل</h2>
    <button onclick="addShipment()">إضافة شحنة جديدة</button>
    <div id="shipments"></div>

    <!-- إعدادات Firebase وكود التهيئة -->
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyA6qT3_bz-TW-APYInozsWbp95c6h7v0-A",
            authDomain: "flash2-d91cf.firebaseapp.com",
            projectId: "flash2-d91cf",
            storageBucket: "flash2-d91cf.firebasestorage.app",
            messagingSenderId: "56061341567",
            appId: "1:56061341567:web:54ab9815e76f0225b4344a"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        function addShipment() {
            const shipmentDetails = prompt("أدخل تفاصيل الشحنة:");
            if (shipmentDetails) {
                db.collection("shipments").add({
                    details: shipmentDetails,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                })
                .then(() => {
                    alert('تمت إضافة الشحنة بنجاح!');
                    displayShipments();
                })
                .catch((error) => {
                    alert("خطأ: " + error.message);
                });
            }
        }

        function displayShipments() {
            db.collection("shipments").get().then((querySnapshot) => {
                let output = "";
                querySnapshot.forEach((doc) => {
                    output += `<p>${doc.data().details}</p>`;
                });
                document.getElementById("shipments").innerHTML = output;
            });
        }

        // عرض الشحنات عند تحميل الصفحة
        displayShipments();
    </script>
</body>
</html>
